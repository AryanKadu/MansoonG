<%- include('../_layouts/header') %>

<div class="container mt-4">
  <h3>Order Details</h3>

  <h5>User Information</h5>
  <ul>
    <li><strong>Name:</strong> <%= order.user.name %></li>
    <li><strong>Email:</strong> <%= order.user.email %></li>
    <li><strong>Mobile:</strong> <%= order.user.mobile || 'N/A' %></li>
  </ul>

  <h5>Ordered Items</h5>
<table class="table table-bordered">
  <thead>
    <tr>
      <th>Product</th>
      <th>Size (ml)</th>
      <th>Qty</th>
      <th>Price (₹)</th>
    </tr>
  </thead>
  <tbody>
    <% order.items.forEach(item => { %>
      <tr>
        <td>
                      <% if (item.product) { %>
                        <span class="badge bg-light border text-dark me-1 mb-1 d-inline-block">
                          <td><%= item.product.title %></td>
                        </span>
                      <% } %>
                        
</td>
        <td><%= item.quantity %></td>
        <td><%= item.price %></td>
      </tr>
    <% }) %>



  </tbody>
</table>


  <p><strong>Total Amount:</strong> ₹<%= order.totalAmount %></p>
  <p><strong>Amount Paid:</strong> ₹<%= order.paidAmount %></p>
  <!-- <p><strong>Remaining Amount:</strong> ₹<%= order.remainingAmount %></p> -->
  <p><strong>Remaining Amount:</strong> ₹<%= order.totalAmount - order.paidAmount %></p>


  <a href="/admin/orders/edit/<%= order._id %>" class="btn btn-warning mt-3">Edit</a>

  <div class="mt-3">
    <form action="/admin/orders/<%= order._id %>/delete" method="POST" onsubmit="return confirm('Are you sure you want to delete this order?')">
  <button type="submit" class="btn btn-danger">Delete Order</button>
</form>
  </div>

</div>

<%- include('../_layouts/footer') %>
